---
title: "[TE6_1] Patrones de Comportamiento"
subtitle: "Observer pattern"
author: "Carlos Granell"
institute: "Universitat Jaume I"
date: "Sep 2021" 
description: "EI1039 - Diseño de Software"

output:
  xaringan::moon_reader:
    css: ["default", "assets/css/cgc-xaringan-style.css"]
    seal: false
    lib_dir: libs
    nature:
      highlightStyle: solarized-light
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(collapse = TRUE,
                      fig.retina = 3)

# devtools::install_github("hadley/emo")
# devtools::install_github("rstudio/fontawesome")
library(emo)
library(fontawesome) # from github: https://github.com/rstudio/fontawesome

```

```{r, load_refs, include=FALSE, cache=FALSE}
source("load_references.r")
```

name: title
class: center, middle
background-image: url(images/rawpixel/jigsaw.jpg)
background-size: cover

# .fancy[`r rmarkdown::metadata$title`]

### &#183; `r rmarkdown::metadata$subtitle`


`r rmarkdown::metadata$author`&#183; `r rmarkdown::metadata$institute`

`r rmarkdown::metadata$description` &#183; `r rmarkdown::metadata$date`


???

Jigsaw teamwork concept macro shot
Image credits: [Rawpixel.com](https://www.rawpixel.com/image/678830)

---
class: inverse, center, middle
background-image: url(images/newspaper-carriers.jpg)
background-size: contain


???
Nos suscribrimos para que nos avisen cuando hay algo nuevo, y no estar pendientes de las novedades.

A tribute to daily newspaper carriers
Image credits: [DeseretNews](https://www.deseret.com/opinion/2021/1/10/22213897/tribute-to-daily-newspaper-carriers-paper-boy-route)


---
class: inverse, center, middle

# Observer Pattern

.large[Propósito]

.large[Problema]

.large[Solución]

.large[Estructura]

.large[Aplicabilidad]

---
class: center, middle

# Observer: Propósito

## define un .coldinline[mecanismo de suscripción] para notificar a varios objetos (.coldinline[observadores]) sobre cualquier evento que sucede al objeto que están observando (.coldinline[sujeto])


---
# Observer: Problema

### Algunos objetos clientes, pero no todos, dependen del estado de un objeto

### No queremos que el cliente compruebe el estado del objeto reiteradamente (pull)

### No queremos que el objeto notifique a todos los clientes, estén o no interesados en su estado


---
# Observer: Solución

### Un _observer_ define una relación 1:N entre un __Sujeto__ (notificador) y muchos __Observadores__ (suscriptores). Cuando el sujeto cambio, se notifica a los suscriptores  

### Un _observer_ separa lo que no cambia (en el Sujeto) de lo variable (Observadores)

### Un _observer_ añade un mecanismo de suscripción al Sujeto

.pull-left[
.large[Sujeto `r fontawesome::fa(name = "equals")` notificador o publicador]
]

.pull-right[
.large[Observador `r fontawesome::fa(name = "equals")` subscriptor]
]


---
class: left, bottom
background-image: url(images/DivingDesingPatterns13.png)
background-size: contain

# Observer: 
# Estructura


???
Image credits: [refactoring.guru](https://refactoring.guru/es/design-patterns/observer)


---
# `r fontawesome::fa(name = "question-circle")` ¿Cualés son las razones para utilizar el patrón `Decorator`?

.large[__A__ Permite construir una estructura de objetos en forma de árbol que puede tratarse como un tipo de objeto único y uniforme]


.large[__B__ Oculta un objeto complejo que requiere muchos recursos hasta que sea necesario crearlo]


.large[__C__ Reduce el número de clases necesarias para ofrecer una combinación de comportamientos]


.large[__D__ Permite que los objetos agreguen dinámicamente comportamientos a otros objetos]

???
0011

---
# Observer: Aplicabilidad

.large[`r fontawesome::fa(name = "arrow-circle-right")` Cuando necesitas asignar funcionalidades
adicionales a objetos durante el tiempo de ejecución sin descomponer el código cliente]

--

.large[`r fontawesome::fa(name = "arrow-circle-right")` Cuando no sea posible extender el comportamiento de un objeto utilizando la herencia]


---
# `r fontawesome::fa(name = "question-circle")` ¿Cómo funciona un patrón `Decorator`? Elige una

.large[__A__ Construye un comportamiento apilando objetos]


.large[__B__ Expande los métodos de una clase con herencia]


.large[__C__ Encapsula una clase para darle una interfaz diferente]


.large[__D__ Agrega características a una clase con una nueva clase]

???
1000

---
# Resumen

### El patrón Observer...

.large[`r fontawesome::fa(name = "arrow-circle-right")` facilita distribuir y gestionar notificaciones de cambios de una forma controlada]

.large[`r fontawesome::fa(name = "arrow-circle-right")` permite que varios objetos (observadors) se _suscriban_ a un objeto (observado)]
 
.large[`r fontawesome::fa(name = "arrow-circle-right")` permite que el objeto observdao notifique a los objetos observados cuando cambia su estado]


