---
title: "[TE4_1] Functional thinking"
subtitle: ""
author: "Carlos Granell"
institute: "Universitat Jaume I"
date: "Sep 2022" 
description: "EI1039 - Diseño de Software"

output:
  xaringan::moon_reader:
    css: ["default", "assets/css/cgc-xaringan-style.css"]
    seal: false
    lib_dir: libs
    nature:
      highlightStyle: solarized-light
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(collapse = TRUE,
                      fig.retina = 3)

# devtools::install_github("hadley/emo")
# devtools::install_github("rstudio/fontawesome")
library(emo)
library(fontawesome) # from github: https://github.com/rstudio/fontawesome

library(xaringanExtra)
library(purrr)
```

```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()
```

```{r, load_refs, include=FALSE, cache=FALSE}
source("load_references.r")
```

name: title
class: left, top
background-image: url(https://danlebrero.com/images/blog/books/grokking-simplicity/grokking-simplicity.jpg)
background-size: cover

# .fancy[`r rmarkdown::metadata$title`]

### `r rmarkdown::metadata$subtitle`

<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>


.whiteinline[.left[`r rmarkdown::metadata$author`&#183; `r rmarkdown::metadata$institute`]]

.whiteinline[.left[`r rmarkdown::metadata$description` &#183; `r rmarkdown::metadata$date`]]


???

Image credits: [danlebrero.com](https://danlebrero.com/2021/09/15/grokking-simplicity-summary/)


---
class: left

### Paradigmas de programación 

.large[`r fontawesome::fa(name = "circle-arrow-right")` Programación Procedural]

--

.large[`r fontawesome::fa(name = "circle-arrow-right")` Programación Orientada a Objetos]

>   .large[Organizar el acceso a los datos]

--

-   .large[`r fontawesome::fa(name = "lightbulb")` **encapsulación**: variables, objetos, ...]

--

-   .large[`r fontawesome::fa(name = "lightbulb")` **herencia**: objetos complejos se crean extendiendo otros más simples]


---
class: left

### Paradigmas de programación 

.large[`r fontawesome::fa(name = "circle-arrow-right")` Programación Funcional]

>   .large[Sin efectos laterales! *No side  effects!*]

--

-   .large[`r fontawesome::fa(name = "lightbulb")` **acciones vs cálculos**: código organizado en las partes que pueden tener efectos laterales y en las partes que no los tienen]

--

-   .large[`r fontawesome::fa(name = "lightbulb")` técnicas para **procesar colecciones de datos** (arrays, lists,...): "todos a la vez" en vez de elemento a elemento]

  - Esta idea funciona mejor si se apoya en la primera (**no side effects!**)

???

Techniques are most effective when items can be processed independently, free of side effects, so they work better thanks to **no side effects**.

---
name: map-function
class: left

# `map` en R


```{r}
# Cada vector es un planeta. 
# Elementos de cada vector representan el radio (km) de las lunas del planeta.
moons <-
  list(
    earth = 1737.1,
    mars = c(11.3, 6.2),
    neptune = 
      c(60.4, 81.4, 156, 174.8, 194, 34.8, 420, 2705.2, 340, 62, 44, 42, 40, 60)
  )
```

--


```{r echo=TRUE}
length(moons)

```

--

```{r echo=TRUE}
length(moons$earth)
length(moons$mars)
length(moons$neptune)
```


???

[https://dcl-prog.stanford.edu/purrr-basics.html](https://dcl-prog.stanford.edu/purrr-basics.html) from [Functional Programming](https://dcl-prog.stanford.edu/)


---
class: left

# `map` en R


```{r out.width ='30%', fig.align='center', echo=FALSE}
knitr::include_graphics('https://dcl-prog.stanford.edu/images/map-step-1.png')
```


---
class: left

# `map` en R


```{r out.width ='60%', fig.align='center', echo=FALSE}
knitr::include_graphics('https://dcl-prog.stanford.edu/images/map-step-2.png')
```


---
class: left

# `map` en R


```{r out.width ='60%', fig.align='center', echo=FALSE}
knitr::include_graphics('https://dcl-prog.stanford.edu/images/map.png')

```


---
class: left

# `map` en R


```{r out.width ='80%', fig.align='center', echo=FALSE}
knitr::include_graphics('https://dcl-prog.stanford.edu/images/map-output.png')
```


---
class: left

# `map` en R

.large[`r fontawesome::fa(name = "circle-arrow-right")` Aplicamos `length()` a cada elemento de `moons`]


```{r out.width ='80%', fig.align='center', echo=FALSE}
knitr::include_graphics('https://dcl-prog.stanford.edu/images/map-length.png')
```


---
class: left

# `map` en R

.large[`r fontawesome::fa(name = "circle-arrow-right")` Cada invocación de `length()` produce un entero, luego el resultado es una lista de enteros]


```{r out.width ='80%', fig.align='center', echo=FALSE}
knitr::include_graphics('https://dcl-prog.stanford.edu/images/length-list.png')
```


---
class: left

# `map` en R

```{r}
map(moons, length)
```


---
class: left

# `map` en R


.panelset.sideways[

.panel[.panel-name[`sort()`]
```{r }
sort(moons$neptune)
```
]

.panel[.panel-name[`map()` + `sort`]
```{r}
map(moons, sort)

```
]

.panel[.panel-name[`sort(decreasing)`]
```{r }
sort(moons$neptune, decreasing = TRUE)
```
]


.panel[.panel-name[`map()` + `sort` + `decreasing`]
```{r}
map(moons, sort, decreasing = TRUE)

```
]

]

---
class: left

# `map` en R

.large[`r fontawesome::fa(name = "circle-arrow-right")` Al añadir más argumentos a `map()`, se pasan automáticamente a la función]


```{r out.width ='80%', fig.align='center', echo=FALSE}
knitr::include_graphics('https://dcl-prog.stanford.edu/images/map-extra-arg.png')
```



---
class: inverse, center, middle

# ¿Por qué son tan eficcientes estas funciones (`map()`, etc.)? 

---
class: inverse, center, middle

# .cold[Sin efectos laterales!]

# .cold[*No side  effects!*]

---
class: inverse, center, middle


# ¿Principio o idea clave de la programación funcional?

---
class: inverse, center, middle


# .cold[Saber diferenciar entre ACCIONES y CÁLCULOS]


???

> código siempre se organiza en acciones, cálculos y datos

.right[cualquier programador funcional]


---
class: inverse, center, middle

# Si comprendes estos principios clave para organizar los efectos laterales, los podrás aplicar a CUALQUIER lenguaje de programación




---
# .cold[SOLID] con ejemplos

.large[`r cite("milington2022")` Ejemplos claros y sencillos en Java para entender los principios SOLID]

.large[`r cite(c("oloruntoba2020", "soysal2022"))` Más ejemplos]

.large[`r cite("martin2014")` Charla de Robert Martín (creador principios) in Yale]

---
# Referencias

```{r print_refs1, echo=FALSE, results="asis"}
PrintBibliography(my_refs, start = 1, end = 5)
```

