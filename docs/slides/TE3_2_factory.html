<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>[TE3_2] Factory objects &amp;   Factory Method pattern</title>
    <meta charset="utf-8" />
    <meta name="author" content="Carlos Granell" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script type="application/json" id="xaringanExtra-editable-docid">{"id":"x646a332dc334ad392bee6a9c8f02cbc","expires":14}</script>
    <script src="libs/himalaya/himalaya.js"></script>
    <script src="libs/js-cookie/js.cookie.js"></script>
    <link href="libs/editable/editable.css" rel="stylesheet" />
    <script src="libs/editable/editable.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <script src="libs/fabric/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#d33f49"],"pen_size":4,"eraser_size":40,"palette":[]}) })</script>
    <link rel="stylesheet" href="assets/css/cgc-xaringan-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

name: title
class: left, top
background-image: url(images/rawpixel/the-creation.jpg)
background-size: cover




<style>.shareagain-bar {
--shareagain-foreground: rgb(255, 255, 255);
--shareagain-background: rgba(0, 0, 0, 0.5);
--shareagain-facebook: none;
--shareagain-pinterest: none;
--shareagain-reddit: none;
}</style>




# .fancy[[TE3_2] Factory objects &amp; &lt;br/&gt; Factory Method pattern]

### &amp;#183; Patrones creacionales

&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;


.right[Carlos Granell&amp;#183; Universitat Jaume I]

.right[EI1039 - Dise帽o de Software &amp;#183; Sep 2022]


???


Michelangelo Buonarroti's The Creation of Adam (circa 1511) famous painting. Original public domain image from Wikimedia Commons.
Image credits: [Rawpixel.com](https://www.rawpixel.com/image/3848277)


---
class: center, top
background-image: url(images/rawpixel/cheese-factory.jpg)
background-size: cover

.large[Un objeto __Factory__ funciona como un f谩brica del mundo real]

--

&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;

# CREA PRODUCTOS 

--

# y los clientes no saben nada del proceso de CREACIN

???

Curing baby Swiss cheese rounds at the Alp and Dell factory. Original image from Carol M. Highsmiths America, Library of Congress collection.
Image credits: [Rawpixel.com](https://www.rawpixel.com/image/433967)


---
class: right, bottom
background-image: url(images/rawpixel/knife.jpg)
background-size: cover

.large[Vas a dise帽ar una tienda online que vende tipos de cuchillos (_knifes_)...]

???

Close up of a kitchen knife
Image credits: [Rawpixel.com](https://www.rawpixel.com/image/432907)

---

.pull-left[
### Clase abstracta `Knife`


```java
public abstract class Knife {
    String name;

    public void sharpen() {
        System.out.println("sharpen");
    }
    
    public void polish() {
        System.out.println("polish");
    }

    public void wrapp() {
        System.out.println("wrapp");
    }

    public String getName() {
        return name;
    }

}
```

]

--

.pull-right[
### Implementaciones de `Knife`


```java
public class ChefKnife extends Knife {

    public ChefKnife() {
        name = "Chef knife";
    }
    
}
```


```java
public class SteakKnife extends Knife {

    public SteakKnife() {
        name = "Steak knife";
    }
    
}
```


]

---

.pull-left[


```java

public class KnifeStore() {
  
  public Knife orderKnife(String type) {
    Knife knife = null;

*   if (type.equals("chef")) {
*     knife = new ChefKnife();
*   } else if (type.equals("steak")) {
*     knife = new SteakKnife();
*   }
      
    knife.sharpen();
    knife.polish();
    knife.wrapp();

    return knife;
  }
}
```
  
]

.pull-right[

### Clase `KnifeStore` 

.large[Produce `Knife`s de dos tipos ("productos")]

.large[Instanciaci贸n concreta con `new` (+ `if-else`)]
]

---

.pull-left[
  

```java

public class KnifeStore() {
  
  public Knife orderKnife(String type) {
    Knife knife = null;

    if (type.equals("chef")) {  
      knife = new ChefKnife();  
    } else if (type.equals("steak")) {  
      knife = new SteakKnife();  
*   } else if (type.equals("bread")) {
*     knife = new BreadKnife();
*   } else if (type.equals("paring")) {
*     knife = new ParingKnife();
*   }
      
      
    knife.sharpen();
    knife.polish();
    knife.wrapp();

    return knife;
  }
}
```
  
]

.pull-right[

### Clase `KnifeStore` 

.large[La tienda `KnifeStore` crece y ofrece nuevos "productos"]

.large[A帽adir o quitar tipos con cuchillos con `new + if-else` funciona...]

.large[...pero con 50 tipos de `Knife`... ]


]

---
class: center, middle


# <svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z"/></svg> [SOLID - Open/Close principle](https://cgranell.github.io/ei1039/slides/TE3_1_solid.html#ocp)

.large[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 128C238.3 128 224 142.4 224 160S238.3 192 256 192s31.97-14.38 31.97-32S273.7 128 256 128zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 384c-17.68 0-31.97-14.38-31.97-32S238.3 320 256 320s31.97 14.38 31.97 32S273.7 384 256 384zM256 256c-53.04 0-96.03 43-96.03 96S202.1 448 256 448c-106.1 0-192.1-86-192.1-192S149.9 64 256 64c53.04 0 96.03 43 96.03 96S309 256 256 256z"/></svg> Las clases deben estar abiertas a la extensi贸n pero __cerradas
a la modificaci贸n__]

--

.large[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z"/></svg> `KnifeStore` no est谩 cerrada a la modificaci贸n]


???

_Concrete instantiation_ crea problemas ya que cada nuevo subtipo de `Knife` implica modificar la clase base, violando el principio de "closed for modification". 


---
class: center, middle


# .coldinline[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 128C238.3 128 224 142.4 224 160S238.3 192 256 192s31.97-14.38 31.97-32S273.7 128 256 128zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 384c-17.68 0-31.97-14.38-31.97-32S238.3 320 256 320s31.97 14.38 31.97 32S273.7 384 256 384zM256 256c-53.04 0-96.03 43-96.03 96S202.1 448 256 448c-106.1 0-192.1-86-192.1-192S149.9 64 256 64c53.04 0 96.03 43 96.03 96S309 256 256 256z"/></svg> [Encapsula lo que var铆a y sep谩ralo de lo que no cambia](https://cgranell.github.io/ei1039/slides/TE3_1_solid.html#principle-encapsulate)]

--

.large[Saca lo que var铆a (creaci贸n de objetos `Knife`) del m茅todo `orderKnife()` y encapsula ese c贸digo en un __Factory object (Simple Factory)__] 


---

.pull-left[


```java

public class SimpleKnifeFactory() {
  
  public Knife createKnife(String type) {
    Knife knife = null;

*   if (type.equals("chef")) {
*     knife = new ChefKnife();
*   } else if (type.equals("steak")) {
*     knife = new SteakKnife();
*   }
      
    return knife;
  }
}
```
  
]

.pull-right[

### Clase `SimpleKnifeFactory` 

.large[Gestiona los detalles de la creaci贸n de objetos]

.large[Encapsula lo que var铆a en `SimpleKnifeFactory`]

.large[Encapsula lo que no cambia en `KnifeStore`]

]


---

.pull-left[
  

```java

public class KnifeStore() {

* private SimpleKnifeFactory factory;
    
*   public KnifeStore(SimpleKnifeFactory
*                     factory) {
*       this.factory = factory;
*   }

    public Knife orderKnife(String type) {
        Knife knife = null;

*       knife = factory.createKnife(type);
      
        knife.sharpen();
        knife.polish();
        knife.wrapp();

        return knife;
    }  
}
```
  
]


.pull-right[

### Clase `KnifeStore`

.large[Necesitamos una referencia al objeto __Factory__]

.large[`orderKnife()` se convierte en  __cliente__ del Factory, y solo pide "productos" del tipo base `Knife`]

.large[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256s256-114.6 256-256C512 114.6 397.4 0 256 0zM406.6 278.6l-103.1 103.1c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25L306.8 288H128C110.3 288 96 273.7 96 256s14.31-32 32-32h178.8l-49.38-49.38c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l103.1 103.1C414.6 241.3 416 251.1 416 256C416 260.9 414.6 270.7 406.6 278.6z"/></svg> Menos __acoplamiento__ entre clases]

]


---
class: left

# .center[Portavoces, atentos! ]

.pull-left[

&lt;img src="images/uml-simplefactory.png" width="100%"/&gt;


]

.pull-right[

.large[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"/></svg> 驴Qui茅n es el cliente, la f谩brica y el producto?]


.large[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"/></svg> 驴En qu茅 situaciones es ideal el `Factory object`?]


.large[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"/></svg> 驴Qu茅 beneficios aporta?]
]

???

Analog铆a: Un Apple Shop no produce iPhones, sino que los recibe de una Factory

Situaci贸n: Si muchos clientes instancian el mismo conjunto de clases ("productos"), es decir, los mismos objetos se requieren por otros componentes de un programa/aplicaci贸n.

Beneficio: C贸digo m谩s f谩cil de modificar

---
class: center, middle


# .coldinline[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 128C238.3 128 224 142.4 224 160S238.3 192 256 192s31.97-14.38 31.97-32S273.7 128 256 128zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 384c-17.68 0-31.97-14.38-31.97-32S238.3 320 256 320s31.97 14.38 31.97 32S273.7 384 256 384zM256 256c-53.04 0-96.03 43-96.03 96S202.1 448 256 448c-106.1 0-192.1-86-192.1-192S149.9 64 256 64c53.04 0 96.03 43 96.03 96S309 256 256 256z"/></svg> [Programa a una interfaz*, no a una implementaci贸n](https://cgranell.github.io/ei1039/slides/TE3_1_solid.html#principle-interface)]

--

.large[El client `KnifeStore` no maneja clases concretas de `Knife` ("implementaciones"), sino la clase base `Knife` (una "generalizaci贸n")] 


???

* "interfaz" se refiere tanto a una interfaz como clase abstracta

---
class: inverse, center, middle

# Patr贸n Factory Method

--

.large[Prop贸sito]

.large[Problema]

.large[Soluci贸n]

.large[Estructura]

.large[Aplicabilidad]



---
name: purpose
class: center, middle

# Factory Method: Prop贸sito

## proporciona una interfaz para crear familias de objetos relacionados o dependientes sin especificar sus clases concretas

---
name: problem
# Factory Method: Problema

.large[Ahora, `KnifeStore` no solo est谩 en US, sino que se expande a Europa. Cada regi贸n tiene sus preferencias locales sobre los tipos de `Knife`]

.large[驴Especializamos `SimpleKnifeFactory` seg煤n la cultura local?]

- `USSimpleKnifeFactory` y 
- `EuropeSimpleKnifeFactory`

.large[Ok, la creaci贸n de objetos se especializa, pero el resto de funcionalidad como `orderKnife` resulta dif铆cil de especializar]


---
name: solution
# Factory Method: Soluci贸n

- .large[En vez del objeto Factory `EuropeSimpleKnifeFactory`, el patr贸n Factory Method crea `EuropeKnifeStore` como subclase de `KnifeStore` (cliente).]

- .large[Cada subclase decide c贸mo se crean los objetos ("productos"), y sobreescriben el **m茅todo f谩brica**]

- .large[Programa a una interfaz* para crear objetos]

---

.pull-left[
  

```java

*public abstract class KnifeStore() {

  public Knife orderKnife(String type) {
    Knife knife = null;

*   knife = createKnife(type);
      
    knife.sharpen();
    knife.polish();
    knife.wrapp();

    return knife;
  }  
  
* abstract Knife createKnife(String type);
}
```
  
]


.pull-right[

### Clase abstract `KnifeStore` 

.large[Clase base es abstracta]

.large[`createKnife()` es el Factory Method: abstracto y vac铆o]

]

---

.pull-left[
  

```java

public class EuropeKnifeStore() 
       extends KnifeStore { 

  @override
  public Knife createKnife(String type) {
    if (type.equals("chef")) {
*     return new EuropeChefKnife();
    } else if (type.equals("steak")) {
*     return new EuropeSteakKnife();
    } else return null;
  }
}
```
  
]


.pull-right[

### Subclase `EuropeKnifeStore` 

.large[Implementa el Factory Method seg煤n los est谩ndares europeos]

.large[Tale vez necesitas definir nuevos "productos" de la clase base `Knife`]

]

---
name: structure
# Factory Method: Estructura


.pull-left[

&lt;img src="images/DivingDesingPatterns03.png" width="100%"/&gt;
]

.pull-right[

.large[__Product__ (`Knife`) declara la interfaz com煤n de objetos]

.large[__ConcreteProducts__ (`EuropeChefKnife`) son implementaciones de la interfaz]

]

???
Image credits: [refactoring.guru](https://refactoring.guru/es/design-patterns/factory-method)


---
# Factory Method: Estructura


.pull-left[

&lt;img src="images/DivingDesingPatterns03.png" width="100%"/&gt;
]

.pull-right[

.large[__Creator__ (`KnifeStore`) declara el factory method (*abstract*) que devuelve un objeto del mismo tipo que la interfaz __Product__]

.large[__ConcreteCreators__ (`EuropeKnifeStore`) sobreescriben el Factory Method de la superclase]
]

???
Image credits: [refactoring.guru](https://refactoring.guru/es/design-patterns/factory-method)

---
name: aplicability
# Factory Method: Aplicabilidad

.large[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256s256-114.6 256-256C512 114.6 397.4 0 256 0zM406.6 278.6l-103.1 103.1c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25L306.8 288H128C110.3 288 96 273.7 96 256s14.31-32 32-32h178.8l-49.38-49.38c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l103.1 103.1C414.6 241.3 416 251.1 416 256C416 260.9 414.6 270.7 406.6 278.6z"/></svg> Cuando no sabes de antemano las dependencias y tipos exactos de los objetos de tu c贸digo] 

- .large[Factory Method separa el c贸digo de creaci贸n de "productos" del c贸digo que hace uso del producto]

--

.large[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256s256-114.6 256-256C512 114.6 397.4 0 256 0zM406.6 278.6l-103.1 103.1c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25L306.8 288H128C110.3 288 96 273.7 96 256s14.31-32 32-32h178.8l-49.38-49.38c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l103.1 103.1C414.6 241.3 416 251.1 416 256C416 260.9 414.6 270.7 406.6 278.6z"/></svg> Cuando quieras ofrecer a los usuarios de tu c贸digo una forma de extender sus componentes internos] 

- .large[隆Me dicen que quieren abrir en Singapure! Ok, ve谩mos:]
  - .large[Extiendo la clase base `Knife` con los nuevos subtipos que necesito]
  - .large[Creo `SingapureKnifeStore` que sobreescribe el Factory Method para crear los nuevos productos]

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
